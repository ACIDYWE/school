# Attack and Defense CTF -- Vulnerabilities

## О чем говорили
- Как разобраться в больших объемах кода и не сойти с ума
- Есть тут что интересное? Как выделить из множетсва функций интересные
- Аффтар жжот. Как понять логику функции и найти уязвимость
- По следам чекера. О важном функционале и тупых закладках

## Важно помнить
- Все стандартные ключи потенциальная опасность - меняй их (но оставь бэкап - разработчики
сервисов тоже могут ошибаться)
- Видишь регистрацию - проверяй права:
    +  правильно ли работает регистрация (как сервис реагирует на пользователей с одним именем)
    +  обрати внимание как хранятся и проверяются пароли (хранение паролей в открытом виде может быть неслучайным)
    +  все ли функции, доступные вошедшему пользователю недоступны невошедшему
    +  если в сервисе есть привилегированные пользователи, недоступны ли их методы для обычных пользователей
    +  есть ли доступ к информации (профилям, сообщениям, секретам) других пользователей
- Криптография. Самописная функция шифрования - повод насторожится
- Думай как хакер: отрицательная цена, нулевое количество, всё, что можно ввести не так - нужно попробовать
- Любая функция, при взляде на которую возникает мысль "это крайне странный способ сделать это - я бы сделал проще",
потенциальная уязвимость или как минимум повод разобраться с причинами такого кода поподробнее

## Полезные ссылки
- [OWASP TOP10](https://habrahabr.ru/company/simplepay/blog/258499/) Краткий перечень основных web уязвимостей. А ещё
на сайте проекта [OWASP](https://www.owasp.org/index.php/Main_Page) есть множество гайдов о том как найти и исправить
различные уязвмиости. Например, [ошибки авторизоции доступа](https://www.owasp.org/index.php/A2_2004_Broken_Access_Control), 
которые мы рассматривали на занятии

## Что делать
В папке [romulus-security](romulus-security) находятся исходники нового сервиса, а так же скомпилированный в байткод python3.5 [чекер](romulus-security/checker.cpython-35.pyc)

**Задание**: 
1) Найти максимальное число уязвимостей и исправить их
2) Написать максимум работоспособных эксплоитов

**Notes**:
- Для заполнения сервиса пробными флагами можно использовать `checker.cpython-35.pyc`
  + Код чекера скомпилирован (в учебных целях)
  + Положить флаг: 
    `python checker.cpython-35.pyc put localhost flagid flag` (`flagid` - некоторый идентификатор флага)
  + Проверить флаг: 
    `python checker.cpython-35.pyc get localhost flagid flag` (`flagid` - тот же, что использовался в `put`)
  + Проверить работоспособность сервиса: 
    `python checker.cpython-35.pyc check localhost`
- Что такое эксплоит смотри [тут](l0.md)